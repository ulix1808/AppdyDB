# Configure Oracle Collectors

> **Fuente (documentaciÃ³n 24.x, puede ser retirada):**  
> https://docs.appdynamics.com/appd/24.x/latest/en/database-visibility/add-database-collectors/configure-oracle-collectors

---

To monitor Oracle with Database Visibility, you must be running Oracle 10g or newer. If you are configuring a collector for Oracle RAC, you only need to configure one collector for the entire cluster. You can choose any node in the cluster to connect to, and the entire cluster will automatically be detected.

**Nota:** If you are using Oracle 12c as PDB, the query for system metrics is available from Oracle Database 12c Release 2 (12.2.0.1) onwards. See the Oracle documentation for more information.

## Connection Details

| Section | Field | Description |
|--------|-------|-------------|
| Create New Collector | Database Type | The database type that you want to monitor. |
| | Agent | The Database Agent that manages the collector. |
| | Collector Name | The name you want to identify the collector by. |
| Connection Details | Hostname or IP Address | The hostname or IP address of the machine that your database is running on. |
| | Listener Port | The TCP/IP address of the port on which your database communicates with the Database Agent. |
| | SID or Service Name | The SID or service name of the Oracle instance you want to monitor. For CDB (container database) monitoring, provide the CDB service name and for PDB (pluggable database) monitoring, provide the PDB service name. For PDB monitoring, the service name must be present in all the nodes that have PDB so that all the nodes get monitored. |
| | Custom JDBC Connection String | The JDBC connection string generated by the database agent (e.g. `jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=...`). You can also specify a custom connection string. When using connection string for Kerberos, ensure that you select the **LDAP/Kerberos** option under **Advanced Options**. |
| Username and Password | Username | The name of the user who is connecting to and monitoring the database through the Database Agent. The user should have the permissions described in User Permissions for Oracle. |
| | Password | The password of the user. |
| | CyberArk | Click to enable CyberArk for database username and password. Download `JavaPasswordSDK.jar` from CyberArk, rename to `cyberark-sdk-9.5.jar`, and copy to the lib directory of the database agent zip file. |
| Advanced Options | Sub-Collectors | Monitor multiple database instances in a consolidated view. You can add up to 29 sub-collectors (30 databases in a custom cluster). All connection parameters other than hostname/IP and port of the sub-collector are the same as the main collector. Different parameters for sub-collectors only via [Create Collector API](https://docs.appdynamics.com/appd/24.x/latest/en/extend-splunk-appdynamics/splunk-appdynamics-apis/database-visibility-api). You cannot convert a custom cluster collector to a standalone collector. |
| | Connection Properties | Add or edit JDBC connection properties for relational databases. For Kerberos: [Monitor Oracle Databases Using Kerberos Authentication](https://docs.appdynamics.com/appd/24.x/latest/en/database-visibility/add-database-collectors/configure-oracle-collectors/monitor-oracle-databases-using-kerberos-authentication). |
| | Exclude Schemas | Schemas to exclude, separated by commas. |
| | SSL Connection | Truststore Location, Type (PKCS12 default, SSO), Password. If SSL_CLIENT_AUTHENTICATION is true in listener.ora and sqlnet.ora: Keystore Location, Type, Password. |
| | LDAP/Kerberos | Use LDAP/Kerberos authentication. |
| | Monitor Operating System | See [Configure the Database Agent to Monitor Server Hardware](https://docs.appdynamics.com/appd/24.x/latest/en/database-visibility/add-database-collectors/configure-the-database-agent-to-monitor-server-hardware). |

## User Permissions for Oracle

### For versions of Oracle 10g and later

- CREATE SESSION
- SELECT_CATALOG_ROLE

Example (change password and tablespace names as needed):

```sql
CREATE USER DBMon_Agent_User IDENTIFIED BY password
default tablespace users
temporary tablespace temp;
GRANT CREATE SESSION, SELECT_CATALOG_ROLE TO DBMon_Agent_User;
```

### For Oracle 12c and later with Multitenant Container Database Option

- CREATE SESSION
- SELECT_CATALOG_ROLE

Example:

```sql
CREATE USER C##DBMon_Agent_User IDENTIFIED BY password default tablespace users temporary tablespace temp CONTAINER=ALL;
GRANT CREATE SESSION, SELECT_CATALOG_ROLE TO C##DBMon_Agent_User CONTAINER=ALL;
ALTER USER C##DBMon_Agent_User QUOTA 100M ON USERS;
alter user C##DBMON_AGENT_USER set container_data=all container=current;
```

### Permissions Required for Oracle Explain Plans

You must provide a plan table in the monitoring user's schema (e.g. from `UTLXPLAN.SQL`, table `PLAN_TABLE`). Need INSERT and SELECT on the plan table, and access to tables/views in the query.

Create the plan table (as the Database Visibility user):

- **Windows:** `@?\rdbms\admin\utlxplan.sql`
- **Linux:** `@?/rdbms/admin/utlxplan.sql`

### Permissions for individual views and tables

If SELECT_CATALOG_ROLE is not available:

1. Execute permission on `dbms_application_info.set_module`.
2. Select on: `dba_data_files`, `dba_free_space`, `dba_ind_columns`, `dba_indexes`, `dba_objects`, `dba_procedures`, `dba_segments`, `dba_sequences`, `dba_synonyms`, `dba_recyclebin`, `dba_tab_columns`, `dba_tables`, `dba_users`, `dba_views`, and the `gv$`/`v$` views listed in the original documentation (e.g. `gv$instance`, `v$session`, `v$sql`, etc.). For `v$` views, grant SELECT on the underlying `v_$` objects (e.g. `GRANT SELECT on v_$archive_dest`).
